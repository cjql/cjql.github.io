<!DOCTYPE html>
<html lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="CJ">
<meta name="renderer" content="webkit">
<meta name="google" value="notranslate">



<meta name="description" content="SQL知识概览。">
<meta name="keywords" content="计算机,数据库">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL">
<meta property="og:url" content="https://cjql.github.io/SQL/index.html">
<meta property="og:site_name" content="CJ">
<meta property="og:description" content="SQL知识概览。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2020-05-01T16:02:08.609Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SQL">
<meta name="twitter:description" content="SQL知识概览。">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <link rel="alternative" href="/atom.xml" title="CJ" type="application/atom+xml">



    <link rel="shortcut icon" href="/resources/favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/yellow/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>SQL | CJ</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>





    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?a4938c90e05043bd9774ff12368e45aa";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


</head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/resources/apple-touch-icon.png" class="animated zoomIn">
        </a>
        <!-- <hgroup>
          <h1 class="header-author"><a href="/">CJ</a></h1>
        </hgroup> -->

        
        <p class="header-subtitle">cs</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false">
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class="no-result">No results found <i class="fa fa-spinner fa-pulse"></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/archives/">优先级</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa GitHub" href="https://github.com/" title="GitHub"></a>
                            
                                <a class="fa 豆瓣" href="https://book.douban.com/" title="豆瓣"></a>
                            
                                <a class="fa Twitter" href="//twitter.com/" title="Twitter"></a>
                            
                                <a class="fa StackOverflow" href="https://stackoverflow.com/" title="StackOverflow"></a>
                            
                                <a class="fa Flickr" href="https://www.flickr.com/" title="Flickr"></a>
                            
                                <a class="fa 博客园" href="https://www.cnblogs.com/" title="博客园"></a>
                            
                                <a class="fa CSDN" href="https://www.csdn.net/" title="CSDN"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/">API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/">LeetCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLP/">NLP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/方法论/">方法论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/目录/">目录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编程语言/">编程语言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机/">计算机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机基础/">计算机基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机组成/">计算机组成</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机网络/">计算机网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/记忆/">记忆</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件开发/">软件开发</a></li></ul>
                    </div>
                </section>
                
                
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">CJ</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/resources/apple-touch-icon.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">CJ</a></h1>
            </hgroup>
            
            <p class="header-subtitle">cs</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/archives/">优先级</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/" title="GitHub"></a>
                            
                                <a class="fa 豆瓣" target="_blank" href="https://book.douban.com/" title="豆瓣"></a>
                            
                                <a class="fa Twitter" target="_blank" href="//twitter.com/" title="Twitter"></a>
                            
                                <a class="fa StackOverflow" target="_blank" href="https://stackoverflow.com/" title="StackOverflow"></a>
                            
                                <a class="fa Flickr" target="_blank" href="https://www.flickr.com/" title="Flickr"></a>
                            
                                <a class="fa 博客园" target="_blank" href="https://www.cnblogs.com/" title="博客园"></a>
                            
                                <a class="fa CSDN" target="_blank" href="https://www.csdn.net/" title="CSDN"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-SQL" class="article article-type-post" itemscope="" itemprop="blogPost">
    
      <div class="article-meta">
        <a href="/SQL/" class="article-date">
      <time datetime="2040-12-25T16:00:00.000Z" itemprop="datePublished">2040-12-26</time>
</a>


      </div>
    
    <div class="article-inner">
      
        <input type="hidden" class="isFancy">
      
      
        <header class="article-header">
          
  
    <h1 class="article-title" itemprop="name">
      SQL
    </h1>
  

        </header>
        
        <div class="article-info article-info-post">
          

          
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/计算机/">计算机</a></li></ul>
    </div>

          <div class="clearfix"></div>
        </div>
        
      
      <div class="article-entry" itemprop="articleBody">
        
        
            
          <p>SQL知识概览。<br><a id="more"></a></p>
<h1 id="1-刷题"><a href="#1-刷题" class="headerlink" title="1. 刷题"></a>1. 刷题</h1><p>UPDATE salary<br>SET sex = char(ASCII(SEX)^ASCII(‘m’)^ASCII(‘f’))</p>
<p>SELECT *<br>FROM cinema<br>WHERE id %2 = 1 and description != ‘boring’ SQL里判断相等用的是一个等号<br>ORDER BY rating DESC 默认的排序为升序</p>
<p><a href="https://leetcode.com/problems/classes-more-than-5-students/submissions/" target="_blank" rel="noopener">https://leetcode.com/problems/classes-more-than-5-students/submissions/</a><br>SELECT<br>    class<br>FROM<br>    courses<br>GROUP BY<br>    class<br>HAVING<br>    COUNT(DISTINCT student)&gt;=5;</p>
<p><a href="https://leetcode.com/problems/duplicate-emails/" target="_blank" rel="noopener">https://leetcode.com/problems/duplicate-emails/</a></p>
<p>SELECT<br>    Email<br>FROM<br>    Person<br>GROUP BY<br>    Email<br>HAVING<br> COUNT(*) &gt; 1 </p>
<p><a href="https://leetcode.com/problems/combine-two-tables/" target="_blank" rel="noopener">https://leetcode.com/problems/combine-two-tables/</a><br>SELECT FirstName, LastName, City, State<br>FROM Person LEFT JOIN Address USING(PersonId)</p>
<p><a href="https://leetcode.com/problems/employees-earning-more-than-their-managers/" target="_blank" rel="noopener">https://leetcode.com/problems/employees-earning-more-than-their-managers/</a><br>SELECT E1.Name AS Employee<br>FROM Employee AS E1, Employee AS E2<br>WHERE E1.ManagerId = E2.Id AND E1.Salary &gt; E2.Salary</p>
<p><a href="https://leetcode.com/problems/customers-who-never-order/description/" target="_blank" rel="noopener">https://leetcode.com/problems/customers-who-never-order/description/</a><br>连接和子查询两种方法(子查询更快leetcode上)<br>到底是哪个ID，不同表中同一名称的列代表了不同的内容</p>
<p>SELECT Name AS Customers<br>FROM Customers<br>WHERE Id NOT IN (SELECT CustomerId FROM Orders)</p>
<p>SELECT C1.Name AS Customers<br>FROM Customers C1 LEFT JOIN Orders O1 ON C1.Id=O1.CustomerId<br>WHERE O1.CustomerId IS NULL</p>
<h1 id="2-概述"><a href="#2-概述" class="headerlink" title="2. 概述"></a>2. 概述</h1><h2 id="2-1-模式"><a href="#2-1-模式" class="headerlink" title="2.1. 模式"></a>2.1. 模式</h2><p>模式定义了数据如何存储、存储什么样的数据以及数据如何分解等信息，数据库和表都有模式。</p>
<h2 id="2-2-主键"><a href="#2-2-主键" class="headerlink" title="2.2. 主键"></a>2.2. 主键</h2><p>主键的值不允许修改，也不允许复用（不能将已经删除的主键值赋给新数据行的主键）。</p>
<h2 id="2-3-SQL"><a href="#2-3-SQL" class="headerlink" title="2.3. SQL"></a>2.3. SQL</h2><p>SQL（Structured Query Language)，标准 SQL 由 ANSI 标准委员会管理，从而称为 ANSI SQL。各个 DBMS 都有自己的实现，如 PL/SQL、Transact-SQL 等。</p>
<h2 id="2-4-大小写"><a href="#2-4-大小写" class="headerlink" title="2.4. 大小写"></a>2.4. 大小写</h2><p>SQL 语句不区分大小写，但是数据库表名、列名和值是否区分依赖于具体的 DBMS 以及配置。</p>
<p>SQL 支持以下三种注释：</p>
<h1 id="3-语法"><a href="#3-语法" class="headerlink" title="3. 语法"></a>3. 语法</h1><h2 id="3-1-注释"><a href="#3-1-注释" class="headerlink" title="3.1. 注释"></a>3.1. 注释</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable; <span class="comment">-- 注释</span></span><br><span class="line"><span class="comment">/* 注释1</span></span><br><span class="line"><span class="comment">   注释2 */</span></span><br></pre></td></tr></table></figure>
<h2 id="3-2-创建数据库与使用数据库"><a href="#3-2-创建数据库与使用数据库" class="headerlink" title="3.2. 创建数据库与使用数据库"></a>3.2. 创建数据库与使用数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="keyword">test</span>;</span><br><span class="line"><span class="keyword">USE</span> <span class="keyword">test</span>;</span><br></pre></td></tr></table></figure>
<h2 id="3-3-创建表"><a href="#3-3-创建表" class="headerlink" title="3.3. 创建表"></a>3.3. 创建表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable (</span><br><span class="line">  <span class="comment"># int 类型，不为空，自增</span></span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="comment"># int 类型，不可为空，默认值为 1，不为空</span></span><br><span class="line">  col1 <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>,</span><br><span class="line">  <span class="comment"># 变长字符串类型，最长为 45 个字符，可以为空</span></span><br><span class="line">  col2 <span class="built_in">VARCHAR</span>(<span class="number">45</span>) <span class="literal">NULL</span>,</span><br><span class="line">  <span class="comment"># 日期类型，可为空</span></span><br><span class="line">  col3 <span class="built_in">DATE</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="comment"># 设置主键为 id</span></span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>));</span><br></pre></td></tr></table></figure>
<h2 id="3-4-创建新子表"><a href="#3-4-创建新子表" class="headerlink" title="3.4. 创建新子表"></a>3.4. 创建新子表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> newtable <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> mytable;</span><br></pre></td></tr></table></figure>
<h2 id="3-5-增加列"><a href="#3-5-增加列" class="headerlink" title="3.5. 增加列"></a>3.5. 增加列</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> mytable</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">col</span> <span class="built_in">CHAR</span>(<span class="number">20</span>);</span><br></pre></td></tr></table></figure>
<h2 id="3-6-删除行"><a href="#3-6-删除行" class="headerlink" title="3.6. 删除行"></a>3.6. 删除行</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br><span class="line"><span class="comment">-- 使用更新和删除操作时一定要用 WHERE 子句，不然会把整张表的数据都破坏。可以先用 SELECT 语句进行测试，防止错误删除。</span></span><br></pre></td></tr></table></figure>
<h2 id="3-7-删除列"><a href="#3-7-删除列" class="headerlink" title="3.7. 删除列"></a>3.7. 删除列</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> mytable</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">COLUMN</span> <span class="keyword">col</span>;</span><br></pre></td></tr></table></figure>
<h2 id="3-8-删除表"><a href="#3-8-删除表" class="headerlink" title="3.8. 删除表"></a>3.8. 删除表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> mytable;</span><br></pre></td></tr></table></figure>
<h2 id="3-9-清空表"><a href="#3-9-清空表" class="headerlink" title="3.9. 清空表"></a>3.9. 清空表</h2><p>– TRUNCATE TABLE 可以清空表，也就是删除所有行。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> mytable;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-10-增加行"><a href="#3-10-增加行" class="headerlink" title="3.10. 增加行"></a>3.10. 增加行</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> mytable(col1, col2)</span><br><span class="line"><span class="keyword">VALUES</span>(val1, val2);</span><br></pre></td></tr></table></figure>
<h2 id="3-11-跨表增加行"><a href="#3-11-跨表增加行" class="headerlink" title="3.11. 跨表增加行"></a>3.11. 跨表增加行</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> mytable1(col1, col2)</span><br><span class="line"><span class="keyword">SELECT</span> col1, col2</span><br><span class="line"><span class="keyword">FROM</span> mytable2;</span><br></pre></td></tr></table></figure>
<h2 id="3-12-改"><a href="#3-12-改" class="headerlink" title="3.12. 改"></a>3.12. 改</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> mytable</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">col</span> = val</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h2 id="3-13-DISTINCT"><a href="#3-13-DISTINCT" class="headerlink" title="3.13. DISTINCT"></a>3.13. DISTINCT</h2><p>相同值只会出现一次。它作用于所有列，也就是说所有列的值都相同才算相同。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> col1, col2</span><br><span class="line"><span class="keyword">FROM</span> mytable;</span><br><span class="line">LIMIT</span><br></pre></td></tr></table></figure></p>
<h2 id="3-14-LIMIT"><a href="#3-14-LIMIT" class="headerlink" title="3.14. LIMIT"></a>3.14. LIMIT</h2><p>限制返回的行数。可以有两个参数，第一个参数为起始行，从 0 开始；第二个参数为返回的总行数。</p>
<p>返回前 5 行：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">5</span>; </span><br><span class="line"><span class="comment">-- 返回前5行</span></span><br><span class="line">LIMIT 0, 5;</span><br><span class="line"><span class="comment">-- 返回前5行</span></span><br><span class="line">LIMIT 2, 3;</span><br><span class="line"><span class="comment">-- 返回第 3 ~ 5 行</span></span><br></pre></td></tr></table></figure></p>
<h2 id="3-15-ORDER-BY排序"><a href="#3-15-ORDER-BY排序" class="headerlink" title="3.15. ORDER BY排序"></a>3.15. ORDER BY排序</h2><p>ASC ：升序（默认）<br>DESC ：降序<br>可以按多个列进行排序，并且为每个列指定不同的排序方式：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> col1 <span class="keyword">DESC</span>, col2 <span class="keyword">ASC</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-16-WHERE过滤"><a href="#3-16-WHERE过滤" class="headerlink" title="3.16. WHERE过滤"></a>3.16. WHERE过滤</h2><p>不进行过滤的数据非常大，导致通过网络传输了多余的数据，从而浪费了网络带宽。因此尽量使用 SQL 语句来过滤不必要的数据，而不是传输所有的数据到客户端中然后由客户端进行过滤。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">col</span> <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure></p>
<p>下表显示了 WHERE 子句可用的操作符</p>
<p>操作符    说明<br>=    等于<br>&lt;    小于</p>
<blockquote>
<p>   大于<br>&lt;&gt; !=    不等于<br>&lt;= !&gt;    小于等于<br>= !&lt;    大于等于<br>BETWEEN    在两个值之间<br>IS NULL    为 NULL 值<br>应该注意到，NULL 与 0、空字符串都不同。</p>
</blockquote>
<p>AND 和 OR 用于连接多个过滤条件。优先处理 AND，当一个过滤表达式涉及到多个 AND 和 OR 时，可以使用 () 来决定优先级，使得优先级关系更清晰。</p>
<p>IN 操作符用于匹配一组值，其后也可以接一个 SELECT 子句，从而匹配子查询得到的一组值。</p>
<p>NOT 操作符用于否定一个条件。</p>
<h2 id="3-17-通配符"><a href="#3-17-通配符" class="headerlink" title="3.17. 通配符"></a>3.17. 通配符</h2><p>通配符也是用在过滤语句中，但它只能用于文本字段。</p>
<p>% 匹配 &gt;=0 个任意字符；</p>
<p>_ 匹配 ==1 个任意字符；</p>
<p>[ ] 可以匹配集合内的字符，例如 [ab] 将匹配字符 a 或者 b。用脱字符 ^ 可以对其进行否定，也就是不匹配集合内的字符。</p>
<p>使用 Like 来进行通配符匹配。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">col</span> <span class="keyword">LIKE</span> <span class="string">'[^AB]%'</span>; <span class="comment">-- 不以 A 和 B 开头的任意文本</span></span><br></pre></td></tr></table></figure></p>
<p>不要滥用通配符，通配符位于开头处匹配会非常慢。</p>
<h2 id="3-18-计算字段"><a href="#3-18-计算字段" class="headerlink" title="3.18. 计算字段"></a>3.18. 计算字段</h2><p>在数据库服务器上完成数据的转换和格式化的工作往往比客户端上快得多，并且转换和格式化后的数据量更少的话可以减少网络通信量。</p>
<p>计算字段通常需要使用 AS 来取别名，否则输出的时候字段名为计算表达式。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> col1 * col2 <span class="keyword">AS</span> <span class="keyword">alias</span></span><br><span class="line"><span class="keyword">FROM</span> mytable;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="keyword">TRIM</span>(col1), <span class="string">'('</span>, <span class="keyword">TRIM</span>(col2), <span class="string">')'</span>) <span class="keyword">AS</span> concat_col</span><br><span class="line"><span class="keyword">FROM</span> mytable;</span><br><span class="line"><span class="comment">-- CONCAT() 用于连接两个字段。</span></span><br><span class="line"><span class="comment">-- TRIM() 可以去除首尾空格。许多数据库会使用空格把值填充为列宽，因此连接的结果会出现一些不必要的空格。</span></span><br></pre></td></tr></table></figure>
<h2 id="3-19-函数"><a href="#3-19-函数" class="headerlink" title="3.19. 函数"></a>3.19. 函数</h2><p>各个 DBMS 的函数都是不相同的，因此不可移植，以下主要是 MySQL 的函数。</p>
<p>汇总<br>函 数    说 明<br>AVG()    返回某列的平均值<br>COUNT()    返回某列的行数<br>MAX()    返回某列的最大值<br>MIN()    返回某列的最小值<br>SUM()    返回某列值之和<br>AVG() 会忽略 NULL 行。</p>
<p>使用 DISTINCT 可以汇总不同的值。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(<span class="keyword">DISTINCT</span> col1) <span class="keyword">AS</span> avg_col</span><br><span class="line"><span class="keyword">FROM</span> mytable;</span><br></pre></td></tr></table></figure></p>
<p>文本处理<br>函数    说明<br>LEFT()    左边的字符<br>RIGHT()    右边的字符<br>LOWER()    转换为小写字符<br>UPPER()    转换为大写字符<br>LTRIM()    去除左边的空格<br>RTRIM()    去除右边的空格<br>LENGTH()    长度<br>SOUNDEX()    转换为语音值<br>其中， SOUNDEX() 可以将一个字符串转换为描述其语音表示的字母数字模式。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">SOUNDEX</span>(col1) = <span class="keyword">SOUNDEX</span>(<span class="string">'apple'</span>)</span><br></pre></td></tr></table></figure></p>
<p>日期和时间处理<br>日期格式：YYYY-MM-DD<br>时间格式：HH:MM:SS<br>函 数    说 明<br>ADDDATE()    增加一个日期（天、周等）<br>ADDTIME()    增加一个时间（时、分等）<br>CURDATE()    返回当前日期<br>CURTIME()    返回当前时间<br>DATE()    返回日期时间的日期部分<br>DATEDIFF()    计算两个日期之差<br>DATE_ADD()    高度灵活的日期运算函数<br>DATE_FORMAT()    返回一个格式化的日期或时间串<br>DAY()    返回一个日期的天数部分<br>DAYOFWEEK()    对于一个日期，返回对应的星期几<br>HOUR()    返回一个时间的小时部分<br>MINUTE()    返回一个时间的分钟部分<br>MONTH()    返回一个日期的月份部分<br>NOW()    返回当前日期和时间<br>SECOND()    返回一个时间的秒部分<br>TIME()    返回一个日期时间的时间部分<br>YEAR()    返回一个日期的年份部分<br>mysql&gt; SELECT NOW();<br>2018-4-14 20:25:11<br>数值处理<br>函数    说明<br>SIN()    正弦<br>COS()    余弦<br>TAN()    正切<br>ABS()    绝对值<br>SQRT()    平方根<br>MOD()    余数<br>EXP()    指数<br>PI()    圆周率<br>RAND()    随机数</p>
<h2 id="3-20-分组GROUP-BY"><a href="#3-20-分组GROUP-BY" class="headerlink" title="3.20. 分组GROUP BY"></a>3.20. 分组GROUP BY</h2><p>把具有相同的数据值的行放在同一组中。</p>
<p>可以对同一分组数据使用汇总函数进行处理，例如求分组数据的平均值等。</p>
<p>指定的分组字段除了能按该字段进行分组，也会自动按该字段进行排序。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">col</span>, <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> <span class="keyword">num</span></span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">col</span>;</span><br></pre></td></tr></table></figure></p>
<p>GROUP BY 自动按分组字段进行排序，ORDER BY 也可以按汇总字段来进行排序。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">col</span>, <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> <span class="keyword">num</span></span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">col</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">num</span>;</span><br></pre></td></tr></table></figure></p>
<p>WHERE 过滤行，HAVING 过滤分组，行过滤应当先于分组过滤。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">col</span>, <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> <span class="keyword">num</span></span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">col</span> &gt; <span class="number">2</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">col</span></span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">num</span> &gt;= <span class="number">2</span>;</span><br></pre></td></tr></table></figure></p>
<p>分组规定：</p>
<p>GROUP BY 子句出现在 WHERE 子句之后，ORDER BY 子句之前；<br>除了汇总字段外，SELECT 语句中的每一字段都必须在 GROUP BY 子句中给出；<br>NULL 的行会单独分为一组；<br>大多数 SQL 实现不支持 GROUP BY 列具有可变长度的数据类型。</p>
<h2 id="3-21-子查询"><a href="#3-21-子查询" class="headerlink" title="3.21. 子查询"></a>3.21. 子查询</h2><p>子查询中只能返回一个字段的数据。</p>
<p>可以将子查询的结果作为 WHRER 语句的过滤条件：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable1</span><br><span class="line"><span class="keyword">WHERE</span> col1 <span class="keyword">IN</span> (<span class="keyword">SELECT</span> col2</span><br><span class="line">               <span class="keyword">FROM</span> mytable2);</span><br></pre></td></tr></table></figure></p>
<p>下面的语句可以检索出客户的订单数量，子查询语句会对第一个查询检索出的每个客户执行一次：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> cust_name, (<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*)</span><br><span class="line">                   <span class="keyword">FROM</span> Orders</span><br><span class="line">                   <span class="keyword">WHERE</span> Orders.cust_id = Customers.cust_id)</span><br><span class="line">                   <span class="keyword">AS</span> orders_num</span><br><span class="line"><span class="keyword">FROM</span> Customers</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> cust_name;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-22-连接"><a href="#3-22-连接" class="headerlink" title="3.22. 连接"></a>3.22. 连接</h2><p>连接用于连接多个表，使用 JOIN 关键字，并且条件语句使用 ON 而不是 WHERE。</p>
<p>连接可以替换子查询，并且比子查询的效率一般会更快。</p>
<p>可以用 AS 给列名、计算字段和表名取别名，给表名取别名是为了简化 SQL 语句以及连接相同表。</p>
<p>内连接<br>内连接又称等值连接，使用 INNER JOIN 关键字。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> A.value, B.value</span><br><span class="line"><span class="keyword">FROM</span> tablea <span class="keyword">AS</span> A <span class="keyword">INNER</span> <span class="keyword">JOIN</span> tableb <span class="keyword">AS</span> B</span><br><span class="line"><span class="keyword">ON</span> A.key = B.key;</span><br></pre></td></tr></table></figure></p>
<p>可以不明确使用 INNER JOIN，而使用普通查询并在 WHERE 中将两个表中要连接的列用等值方法连接起来。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> A.value, B.value</span><br><span class="line"><span class="keyword">FROM</span> tablea <span class="keyword">AS</span> A, tableb <span class="keyword">AS</span> B</span><br><span class="line"><span class="keyword">WHERE</span> A.key = B.key;</span><br></pre></td></tr></table></figure></p>
<p>自连接<br>自连接可以看成内连接的一种，只是连接的表是自身而已。</p>
<p>一张员工表，包含员工姓名和员工所属部门，要找出与 Jim 处在同一部门的所有员工姓名。</p>
<p>子查询版本<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> department = (</span><br><span class="line">      <span class="keyword">SELECT</span> department</span><br><span class="line">      <span class="keyword">FROM</span> employee</span><br><span class="line">      <span class="keyword">WHERE</span> <span class="keyword">name</span> = <span class="string">"Jim"</span>);</span><br></pre></td></tr></table></figure></p>
<p>自连接版本<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e1.name</span><br><span class="line"><span class="keyword">FROM</span> employee <span class="keyword">AS</span> e1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> employee <span class="keyword">AS</span> e2</span><br><span class="line"><span class="keyword">ON</span> e1.department = e2.department</span><br><span class="line">      <span class="keyword">AND</span> e2.name = <span class="string">"Jim"</span>;</span><br></pre></td></tr></table></figure></p>
<p>自然连接<br>自然连接是把同名列通过等值测试连接起来的，同名列可以有多个。</p>
<p>内连接和自然连接的区别：内连接提供连接的列，而自然连接自动连接所有同名列。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> A.value, B.value</span><br><span class="line"><span class="keyword">FROM</span> tablea <span class="keyword">AS</span> A <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> tableb <span class="keyword">AS</span> B;</span><br></pre></td></tr></table></figure></p>
<p>外连接<br>外连接保留了没有关联的那些行。分为左外连接，右外连接以及全外连接，左外连接就是保留左表没有关联的行。</p>
<p>检索所有顾客的订单信息，包括还没有订单信息的顾客。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Customers.cust_id, Orders.order_num</span><br><span class="line"><span class="keyword">FROM</span> Customers <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> Orders</span><br><span class="line"><span class="keyword">ON</span> Customers.cust_id = Orders.cust_id;</span><br></pre></td></tr></table></figure></p>
<p>customers 表：</p>
<p>cust_id    cust_name<br>1    a<br>2    b<br>3    c<br>orders 表：</p>
<p>order_id    cust_id<br>1    1<br>2    1<br>3    3<br>4    3<br>结果：</p>
<p>cust_id    cust_name    order_id<br>1    a    1<br>1    a    2<br>3    c    3<br>3    c    4<br>2    b    Null</p>
<h2 id="3-23-组合查询"><a href="#3-23-组合查询" class="headerlink" title="3.23. 组合查询"></a>3.23. 组合查询</h2><p>使用 UNION 来组合两个查询，如果第一个查询返回 M 行，第二个查询返回 N 行，那么组合查询的结果一般为 M+N 行。</p>
<p>每个查询必须包含相同的列、表达式和聚集函数。</p>
<p>默认会去除相同行，如果需要保留相同行，使用 UNION ALL。</p>
<p>只能包含一个 ORDER BY 子句，并且必须位于语句的最后。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">col</span></span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">col</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">col</span></span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">col</span> =<span class="number">2</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-24-视图"><a href="#3-24-视图" class="headerlink" title="3.24. 视图"></a>3.24. 视图</h2><p>视图是虚拟的表，本身不包含数据，也就不能对其进行索引操作。</p>
<p>对视图的操作和对普通表的操作一样。</p>
<p>视图具有如下好处：</p>
<p>简化复杂的 SQL 操作，比如复杂的连接；<br>只使用实际表的一部分数据；<br>通过只给用户访问视图的权限，保证数据的安全性；<br>更改数据格式和表示。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> myview <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">Concat</span>(col1, col2) <span class="keyword">AS</span> concat_col, col3*col4 <span class="keyword">AS</span> compute_col</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> col5 = val;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-25-存储过程"><a href="#3-25-存储过程" class="headerlink" title="3.25. 存储过程"></a>3.25. 存储过程</h2><p>存储过程可以看成是对一系列 SQL 操作的批处理。</p>
<p>使用存储过程的好处：</p>
<p>代码封装，保证了一定的安全性；<br>代码复用；<br>由于是预先编译，因此具有很高的性能。<br>命令行中创建存储过程需要自定义分隔符，因为命令行是以 ; 为结束符，而存储过程中也包含了分号，因此会错误把这部分分号当成是结束符，造成语法错误。</p>
<p>包含 in、out 和 inout 三种参数。</p>
<p>给变量赋值都需要用 select into 语句。</p>
<p>每次只能给一个变量赋值，不支持集合的操作。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">delimiter //</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> myprocedure( <span class="keyword">out</span> ret <span class="built_in">int</span> )</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">declare</span> y <span class="built_in">int</span>;</span><br><span class="line">        <span class="keyword">select</span> <span class="keyword">sum</span>(col1)</span><br><span class="line">        <span class="keyword">from</span> mytable</span><br><span class="line">        <span class="keyword">into</span> y;</span><br><span class="line">        <span class="keyword">select</span> y*y <span class="keyword">into</span> ret;</span><br><span class="line">    <span class="keyword">end</span> //</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br><span class="line"><span class="keyword">call</span> myprocedure(@ret);</span><br><span class="line"><span class="keyword">select</span> @ret;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-26-游标"><a href="#3-26-游标" class="headerlink" title="3.26. 游标"></a>3.26. 游标</h2><p>在存储过程中使用游标可以对一个结果集进行移动遍历。</p>
<p>游标主要用于交互式应用，其中用户需要对数据集中的任意行进行浏览和修改。</p>
<p>使用游标的四个步骤：</p>
<p>声明游标，这个过程没有实际检索出数据；<br>打开游标；<br>取出数据；<br>关闭游标；<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">delimiter //</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> myprocedure(<span class="keyword">out</span> ret <span class="built_in">int</span>)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">declare</span> done <span class="built_in">boolean</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">declare</span> mycursor <span class="keyword">cursor</span> <span class="keyword">for</span></span><br><span class="line">        <span class="keyword">select</span> col1 <span class="keyword">from</span> mytable;</span><br><span class="line">        <span class="comment"># 定义了一个 continue handler，当 sqlstate '02000' 这个条件出现时，会执行 set done = 1</span></span><br><span class="line">        <span class="keyword">declare</span> continue <span class="keyword">handler</span> <span class="keyword">for</span> <span class="keyword">sqlstate</span> <span class="string">'02000'</span> <span class="keyword">set</span> done = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        open mycursor;</span><br><span class="line"></span><br><span class="line">        repeat</span><br><span class="line">            fetch mycursor into ret;</span><br><span class="line">            <span class="keyword">select</span> ret;</span><br><span class="line">        until done <span class="keyword">end</span> <span class="keyword">repeat</span>;</span><br><span class="line"></span><br><span class="line">        close mycursor;</span><br><span class="line">    <span class="keyword">end</span> //</span><br><span class="line"> delimiter ;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-27-触发器"><a href="#3-27-触发器" class="headerlink" title="3.27. 触发器"></a>3.27. 触发器</h2><p>触发器会在某个表执行以下语句时而自动执行：DELETE、INSERT、UPDATE。</p>
<p>触发器必须指定在语句执行之前还是之后自动执行，之前执行使用 BEFORE 关键字，之后执行使用 AFTER 关键字。BEFORE 用于数据验证和净化，AFTER 用于审计跟踪，将修改记录到另外一张表中。</p>
<p>INSERT 触发器包含一个名为 NEW 的虚拟表。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> mytrigger <span class="keyword">AFTER</span> <span class="keyword">INSERT</span> <span class="keyword">ON</span> mytable</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> <span class="keyword">SELECT</span> NEW.col <span class="keyword">into</span> @<span class="keyword">result</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="keyword">result</span>; <span class="comment">-- 获取结果</span></span><br></pre></td></tr></table></figure></p>
<p>DELETE 触发器包含一个名为 OLD 的虚拟表，并且是只读的。</p>
<p>UPDATE 触发器包含一个名为 NEW 和一个名为 OLD 的虚拟表，其中 NEW 是可以被修改的，而 OLD 是只读的。</p>
<p>MySQL 不允许在触发器中使用 CALL 语句，也就是不能调用存储过程。</p>
<h2 id="3-28-事务管理"><a href="#3-28-事务管理" class="headerlink" title="3.28. 事务管理"></a>3.28. 事务管理</h2><p>基本术语：</p>
<p>事务（transaction）指一组 SQL 语句；<br>回退（rollback）指撤销指定 SQL 语句的过程；<br>提交（commit）指将未存储的 SQL 语句结果写入数据库表；<br>保留点（savepoint）指事务处理中设置的临时占位符（placeholder），你可以对它发布回退（与回退整个事务处理不同）。<br>不能回退 SELECT 语句，回退 SELECT 语句也没意义；也不能回退 CREATE 和 DROP 语句。</p>
<p>MySQL 的事务提交默认是隐式提交，每执行一条语句就把这条语句当成一个事务然后进行提交。当出现 START TRANSACTION 语句时，会关闭隐式提交；当 COMMIT 或 ROLLBACK 语句执行后，事务会自动关闭，重新恢复隐式提交。</p>
<p>设置 autocommit 为 0 可以取消自动提交；autocommit 标记是针对每个连接而不是针对服务器的。</p>
<p>如果没有设置保留点，ROLLBACK 会回退到 START TRANSACTION 语句处；如果设置了保留点，并且在 ROLLBACK 中指定该保留点，则会回退到该保留点。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span></span><br><span class="line">// ...</span><br><span class="line"><span class="keyword">SAVEPOINT</span> delete1</span><br><span class="line">// ...</span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> delete1</span><br><span class="line">// ...</span><br><span class="line"><span class="keyword">COMMIT</span></span><br></pre></td></tr></table></figure></p>
<h2 id="3-29-字符集"><a href="#3-29-字符集" class="headerlink" title="3.29. 字符集"></a>3.29. 字符集</h2><p>基本术语：</p>
<p>字符集为字母和符号的集合；<br>编码为某个字符集成员的内部表示；<br>校对字符指定如何比较，主要用于排序和分组。<br>除了给表指定字符集和校对外，也可以给列指定：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable</span><br><span class="line">(<span class="keyword">col</span> <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> latin <span class="keyword">COLLATE</span> latin1_general_ci )</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> hebrew <span class="keyword">COLLATE</span> hebrew_general_ci;</span><br></pre></td></tr></table></figure></p>
<p>可以在排序、分组时指定校对：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">col</span> <span class="keyword">COLLATE</span> latin1_general_ci;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-30-权限管理"><a href="#3-30-权限管理" class="headerlink" title="3.30. 权限管理"></a>3.30. 权限管理</h2><p>MySQL 的账户信息保存在 mysql 这个数据库中。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">USE</span> mysql;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">user</span> <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure></p>
<h3 id="3-30-1-创建账户"><a href="#3-30-1-创建账户" class="headerlink" title="3.30.1. 创建账户"></a>3.30.1. 创建账户</h3><p>新创建的账户没有任何权限。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> myuser <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'mypassword'</span>;</span><br></pre></td></tr></table></figure></p>
<h3 id="3-30-2-修改账户名"><a href="#3-30-2-修改账户名" class="headerlink" title="3.30.2. 修改账户名"></a>3.30.2. 修改账户名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RENAME</span> <span class="keyword">USER</span> myuser <span class="keyword">TO</span> newuser;</span><br></pre></td></tr></table></figure>
<h3 id="3-30-3-删除账户"><a href="#3-30-3-删除账户" class="headerlink" title="3.30.3. 删除账户"></a>3.30.3. 删除账户</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> myuser;</span><br></pre></td></tr></table></figure>
<h3 id="3-30-4-查看权限"><a href="#3-30-4-查看权限" class="headerlink" title="3.30.4. 查看权限"></a>3.30.4. 查看权限</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GRANTS</span> <span class="keyword">FOR</span> myuser;</span><br></pre></td></tr></table></figure>
<h3 id="3-30-5-授予权限"><a href="#3-30-5-授予权限" class="headerlink" title="3.30.5. 授予权限"></a>3.30.5. 授予权限</h3><p>账户用 username@host 的形式定义，username@% 使用的是默认主机名。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>, <span class="keyword">INSERT</span> <span class="keyword">ON</span> mydatabase.* <span class="keyword">TO</span> myuser;</span><br></pre></td></tr></table></figure></p>
<h3 id="3-30-6-删除权限"><a href="#3-30-6-删除权限" class="headerlink" title="3.30.6. 删除权限"></a>3.30.6. 删除权限</h3><p>GRANT 和 REVOKE 可在几个层次上控制访问权限：</p>
<p>整个服务器，使用 GRANT ALL 和 REVOKE ALL；<br>整个数据库，使用 ON database.<em>；<br>特定的表，使用 ON database.table；<br>特定的列；<br>特定的存储过程。<br>REVOKE SELECT, INSERT ON mydatabase.</em> FROM myuser;</p>
<h3 id="3-30-7-更改密码"><a href="#3-30-7-更改密码" class="headerlink" title="3.30.7. 更改密码"></a>3.30.7. 更改密码</h3><p>必须使用 Password() 函数进行加密。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> PASSWROD <span class="keyword">FOR</span> myuser = <span class="keyword">Password</span>(<span class="string">'new_password'</span>);</span><br></pre></td></tr></table></figure></p>
<h1 id="4-牛客"><a href="#4-牛客" class="headerlink" title="4. 牛客"></a>4. 牛客</h1><p>常见的sql优化技巧，不正确的是？<em>乐信笔试题|c5c977fbc9e0453486e244c5a88a8678<br>关于SQL优化，哪些是正确的？</em>唯品会笔试题|be873ae5acd448b18a5045677c87c84c            </p>
<p>写出下面2个PHP操作Mysql函数的作用及区别。_微博笔试题|db95632130dc414e9af675444b04ce87            </p>
<p>现有Mysql数据库，写Spring + Hibernate_|7633c7c52a8447fda1d76e83d77070aa<br>mysql数据库，game_order表表结构如下，下面哪些<em>|7d2af51194e14e708c71c855f5f28a36<br>Linux下MySQL数据库安装方式分为[$##$]、[$#</em>搜狐畅游笔试题|0b2b724678fc408f959e5469a05517d2<br>PHP只能跟MySQL数据库进行联合编程说法是否正确()<em>|33b69ee0d53d4bda8cb28ab8129e117d<br>在配置APP连接MySQL数据库的时候，字符串&ldquo;</em>搜狐畅游笔试题|38b46989ee664be2a91fe0464da47c1d<br>MySQL数据库提供了四种级别的事务隔离，其中默认的隔离级别<em>搜狐畅游笔试题|4bd14ee6743841e29d5c899a00ccdf93<br>PHP只能跟MySQL数据库进行联合编程说法是否正确()</em>|7856c6be6c8c41b4826bcc6ea70ce334<br>MySQL数据库中可使用（）语句增加新用户并限制用户访问数据<em>|827ef567d596425e98ff86cf28ad4b9b<br>MySQL数据库查询操作中可使用（）子句指定查询结果的排序规</em>|98c2182584e0499db2dd2c3e0e7241fd<br>如下哪些日志可以记录到MySQL数据库的所有更新操作<em>搜狐畅游笔试题|a2ce8dcfcc57434bb16b4e9e0ad75701<br>假设MySQL数据库</em>搜狗笔试题|aeff9b71bc4f45b3987a82fab508e852            </p>
<p>Mysql查询时，只有满足联接条件的记录才包含在查询结果，这<em>第四范式笔试题|6a383d264d1c42029b7d3ffd3fc7bdcd<br>Mysql查询时，只有满足联接条件的记录才包含在查询结果，这</em>摩拜笔试题|ec152f2aa7ce485cb1e9772dfef2b307<br>在SQL查询时，如果需要去掉查询结果中的重复组，应使用____|0ff9a20f04a4458eb108af559782bd78<br>在SQL查询时，使用WHERE子句指出的<em>|2af4e50a36894d9f8e4ffadfb5ecbd6a<br>PDO通过执行SQL查询与数据库进行交互，可以分为多种不同的</em>|86cdf39c251149c3ba207219391e76c8<br>在SQL查询中使用WHERE子句指出的是（）。_|9a65de6327df4a4288acc151d4e01a2b<br>SQL查询语句中where、group by、having <em>摩拜笔试题|cd7d70aea97b450593f1263defe18a92<br>哪种不是SQL查询的联接算法</em>招商银行信用卡中心笔试题|d7e33038eea04c88bd34ff6d49a4f108<br>在SQL查询时，如果需要去掉查询结果中的重复组，应使用（ ）_|d93cdbf234094c619a9259f776817dd5            </p>
<p>Mysql sql注入中使用延时注入时常用的语句是（）<em>|04139bac8c024c0a970add8504e5e028<br>Mysql sql注入中使用延时注入时常用的语句是（）</em>小米笔试题|1f9d81d3747a43af9ff952584bce3010<br>分类列举sql注入常用判断方法?_|c3593d010fa745c88c84a830bfbe7cd8            </p>
<p>使用sql语句查询class列不是NULL的记录，WHERE_快手笔试题|a3140cd056dd4262a539f73396e28765<br>写出以下sql语句。<em>网易笔试题|a9889965d6fd40aebe8f1865b965f072<br>写出符合条件的sql语句。</em>腾讯笔试题|bcd7133020df49eeab0c656718a876d7<br>在SQL语句中，与表达式&quot;仓库号&nbsp;NOT_搜狐畅游笔试题|254487b011c64320abeced5d56239201<br>已知表T1中有2行数据，T2中有3行数据，执行SQL语句,&amp;<em>摩拜笔试题|2a35d7a4d6b24d43a3b32a27ef92418c<br>SQL语句执行的顺序是</em>网易笔试题|2bee77aff9c94b2dae43e493cf3df319<br>下述SQL语句中，起修改表中数据作用的命令动词是（）<em>|2e2ddd5123794a8aa27a18f64484dd88<br>对于满足SQL92标准的SQL语句：SELECT foo,c</em>招商银行信用卡中心笔试题|2f0a9189f17847a5af6f17dd7ab62b59<br>下面关于SQL语句”SELECT&nbsp;<em>&nbsp;F_搜狐畅游笔试题|487036093b2248138a1bd57c4e56682c<br>&nbsp;SQL语句性能分析的关键字是什么？<em>腾讯笔试题|5d5b782a1a484af4ac3ab07e437d468f<br>ADO.net访问SQL server数据库时，在SQL语句</em>|5f2c5766357c4d48988d319288f74dc7<br>在SQL语句中，用“%”表示任何一个字符 ，这种说法正确吗(<em>|6243c96f1d034d8cb12033e1b8aab0f9<br>下列哪一个Transact-SQL语句能够实现收回user2</em>|6300f4878d83446db352c9fb46641841<br>SQL语句中，删除一个表的命令是()。<em>猿辅导笔试题|6b1b19602fbe423b82b59d87c7cdfd79<br>SQL语句中，可以查看到学生信息表中，学生姓名的SQL语句为</em>小米笔试题|6fdd1a3594824233aaee3e2909ac5dfb<br>对于满足SQL92标准的SQL语句：SELECT foo,c_腾讯笔试题|7abd397a22054bbb99e2b3982ff81d01<br>下列SQL语句中，修改表结构的是（）_|7f5a506326c944ef95f6b9b62bd44708<br>对于SQL语句select </em> from t where a_网易笔试题|a9755786616e4049aa3d3041f3a99c41<br>下列SQL语句可以将查询结果降序排列的是<em>|b07884418c3448fd8e91b097eca8a259<br>为何SQL语句需要使用大写字母？</em>|b6b2ce1ae18c48a99047e61a70592a67<br>用SQL语句建立表时将属性定义为主关键字，应使用短语( )<em>第四范式笔试题|ba8e4dfd1d3f4b1bbc0bd74f727195ad<br>SQL语句中与Having子句同时使用的语句是？（）</em>顺丰科技笔试题|d35fee69aefa4ff6af06fe4a74706db7<br>下列两条SQL语句的检索结果为何不同？<em>华为笔试题|d3980009a1094d2a88fc4270820a665b<br>使用Transact-SQL语句拒绝user4查询视图MyV</em>|ddcbfe05f1d0477c9a56d7124759c2f0            </p>
<p>以下hive sql语法正确的是<em>网易笔试题|185a862dc74e42d49f6937e3cd4fef42<br>关于isql语法分析器的常用参数，下面说法正确的有：（&amp;nb</em>|7895f6e3d3d94dd09b606f2db01ba615<br>以下hive sql语法正确的是<em>网易笔试题|f4476d751a4c41e6ba27730163641faa<br>增加数据库一列的SQL语法是什么？</em>人人网笔试题|91f0508367e34d318bcca2786823dccf            </p>
<p>SQL语言具有的功能是　( )_|047aec571bea474896313c3e7689848e<br>在SQL语言中授权的操作是通过<strong>___</strong>语句实现的。<em>|0b73d04ce6e6491d848a950ee6539eec<br>在SQL语言的SELECT语句中，能实现选择操作的是：</em>|1301822371f94a818a44012ad07775cf<br>SQL语言是（）的语言，易学习。<em>|18414cc2a1cf4207a43c14980b4468e0<br>SQL语言中，用于授权的语句是()。 &lt;div&gt;</em>|18d8039d8cd84276b7121129d13a3f76<br>在SQL语言中，子查询是&lt;/span&gt;<em>|217ddfe703754efb909d747bbc378151<br>SQL语言的功能包括()、()、()、()。</em>|58d3e034df4748fdbdd99672a65e0a28<br>在SQL语言的SELECT查询中，需要去掉查询结果中的重复记<em>|6b5dc36d8553441382647b2683262ff3<br>SQL语言的关键字包括SELECT、INSERT、UPDAT</em>百度笔试题|6d7c074de2644e118845dacebd95a042<br>在SQL语言的Select语句中实现选择运算的子句是（ ）。<em>|6fa9dbb6f740449e8d7334a8680d782a<br>标准SQL语言集数据查询、数据操作、数据定义和数据控制功能于</em>|7697bc2262e444aabf3dce7ab4e0ecf7<br>SQL语言具有（       ）的功能。<em>|a3c2b0afb9134f06bfc62b4c8e3118ec<br>SQL语言集数据查询、数据操纵、数据定义和数据控制功能于一体</em>|a6ceec080b7948359a0375efa7ea879e<br>标准SQL语言集数据查询、数据操作、数据定义和数据控制功能于<em>|a8522e7b766c445596ebfb72bf31836a<br>SQL语言允许使用通配符进行字符串匹配的操作,其中&amp;lsqu</em>摩拜笔试题|aca0f342bb9e46c7ae576e90f94db787<br>SQL语言中删除一个表的指令是<em>快手笔试题|b15436e05f354461af026c66f209a2a6<br>SQL语言共分为三大类（亦有说法分为四大类），那么不属于数据</em>顺丰科技笔试题|b2ff34be83de4dc4a81f3902c25ef9f5<br>在SQL语言的SELECT语句中，对应关系代数中“投影”运算<em>|b962888aa0644610bd05c3366aec5ee7<br>在数据库的SQL语言开发中，下述关于Union和Union&amp;</em>唯品会笔试题|bd4453be5de94445916bae4aa8965666<br>SQL语言集数据查询、数据操纵、数据定义和数据控制功能于一体<em>腾讯笔试题|ccecce1c5f1a48b99302dfc58b2c4c66<br>在SQL语言中，子查询是（&nbsp;&nbsp;&amp;nbsp</em>摩拜笔试题|e849c014eeb5449fb4c45578ec3cd2ab<br>&nbsp;SQL语言中删除一个表的指令是（）_腾讯笔试题|efb2f754ab9a4601a7dd9fb184809983            </p>
<p>使用SQLServer数据库系统时如何减少事务的死锁<em>招商银行信用卡中心笔试题|9f9ca757f11d489ebe4af3847f507135<br>1&nbsp;[问答]简单介绍SQLite数据库。</em>|91a9a0a75013423788e1acd8a25c7490            </p>
<p>mysql主从复制？_|85b17fb014eb46ffb653465681af1775                     </p>
<p>现有Mysql数据库，写Spring + Hibernate_|7633c7c52a8447fda1d76e83d77070aa<br>Linux下MySQL数据库安装方式分为[$##$]、[$#<em>搜狐畅游笔试题|0b2b724678fc408f959e5469a05517d2<br>PHP只能跟MySQL数据库进行联合编程说法是否正确()</em>|33b69ee0d53d4bda8cb28ab8129e117d<br>在配置APP连接MySQL数据库的时候，字符串&ldquo;<em>搜狐畅游笔试题|38b46989ee664be2a91fe0464da47c1d<br>MySQL数据库提供了四种级别的事务隔离，其中默认的隔离级别</em>搜狐畅游笔试题|4bd14ee6743841e29d5c899a00ccdf93<br>PHP只能跟MySQL数据库进行联合编程说法是否正确()<em>|7856c6be6c8c41b4826bcc6ea70ce334<br>MySQL数据库中可使用（）语句增加新用户并限制用户访问数据</em>|827ef567d596425e98ff86cf28ad4b9b<br>MySQL数据库查询操作中可使用（）子句指定查询结果的排序规<em>|98c2182584e0499db2dd2c3e0e7241fd<br>如下哪些日志可以记录到MySQL数据库的所有更新操作</em>搜狐畅游笔试题|a2ce8dcfcc57434bb16b4e9e0ad75701<br>假设MySQL数据库_搜狗笔试题|aeff9b71bc4f45b3987a82fab508e852<br>mysql数据库，game_order表表结构如下，下面哪些_|7d2af51194e14e708c71c855f5f28a36            </p>

        
      </div>
      
    </div>
    
      
    <div class="copyright">
        <p><span>本文标题:</span><a href="/SQL/">SQL</a></p>
        <p><span>文章作者:</span><a href="/" title="访问 CJ 的个人博客">CJ</a></p>
        <p><span>优先级别:</span>2040-12-26</p>
        <p><span>最后更新:</span>2020-05-02, 00:02</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/SQL/" title="SQL">https://cjql.github.io/SQL/</a>
            <span class="copy-path" data-clipboard-text="原文: https://cjql.github.io/SQL/　　作者: CJ" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        
            <p>
                <span>更新历史:</span>
                <i class="fa fa-github"></i>
                <a href="https://github.com/cjql/blog/blame/master/source/_posts/SQL.md" title="顺序查看文章各部分修改记录" target="_blank">Blame</a>                
                <i class="fa fa-check-square-o"></i>
                <a href="https://github.com/cjql/blog/edit/master/source/_posts/SQL.md" title="直接在线编辑" target="_blank">Edit</a>
                <i class="fa fa-github-alt"></i>
                <a href="https://github.com/cjql/blog/commits/master/source/_posts/SQL.md" title="查看文章有关更新记录" target="_blank">History</a>
                <i class="fa fa-file-text-o"></i>	
                <a href="https://raw.githubusercontent.com/cjql/blog/master/source/_posts/SQL.md" title="查看 & 下载文章 Markdown 原始文本" target="_blank">mdRaw</a>
                <i class="fa fa-file-movie-o"></i>
                <a href="https://github.com/cjql/blog/blob/master/source/_posts/SQL.md" title="GitHub查看" target="_blank">NormalView</a>
            </p>
        
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="中国大陆 (CC BY-NC-SA 3.0 CN)" target="_blank">"署名-非商用-相同方式共享 3.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>

      
    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/windows下用Flask开发微信公众号/">
                    Windows环境下用Flask开发微信公众号
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/Python知识结构/">
                    Python知识结构
                </a>
            </div>
        
    </nav>

    
  </article>
  
  
  
  
  
  
    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-刷题"><span class="toc-text">1. 刷题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-概述"><span class="toc-text">2. 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-模式"><span class="toc-text">2.1. 模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-主键"><span class="toc-text">2.2. 主键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-SQL"><span class="toc-text">2.3. SQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-大小写"><span class="toc-text">2.4. 大小写</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-语法"><span class="toc-text">3. 语法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-注释"><span class="toc-text">3.1. 注释</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-创建数据库与使用数据库"><span class="toc-text">3.2. 创建数据库与使用数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-创建表"><span class="toc-text">3.3. 创建表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-创建新子表"><span class="toc-text">3.4. 创建新子表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-增加列"><span class="toc-text">3.5. 增加列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-删除行"><span class="toc-text">3.6. 删除行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-删除列"><span class="toc-text">3.7. 删除列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-8-删除表"><span class="toc-text">3.8. 删除表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-9-清空表"><span class="toc-text">3.9. 清空表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-10-增加行"><span class="toc-text">3.10. 增加行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-11-跨表增加行"><span class="toc-text">3.11. 跨表增加行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-12-改"><span class="toc-text">3.12. 改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-13-DISTINCT"><span class="toc-text">3.13. DISTINCT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-14-LIMIT"><span class="toc-text">3.14. LIMIT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-15-ORDER-BY排序"><span class="toc-text">3.15. ORDER BY排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-16-WHERE过滤"><span class="toc-text">3.16. WHERE过滤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-17-通配符"><span class="toc-text">3.17. 通配符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-18-计算字段"><span class="toc-text">3.18. 计算字段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-19-函数"><span class="toc-text">3.19. 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-20-分组GROUP-BY"><span class="toc-text">3.20. 分组GROUP BY</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-21-子查询"><span class="toc-text">3.21. 子查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-22-连接"><span class="toc-text">3.22. 连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-23-组合查询"><span class="toc-text">3.23. 组合查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-24-视图"><span class="toc-text">3.24. 视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-25-存储过程"><span class="toc-text">3.25. 存储过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-26-游标"><span class="toc-text">3.26. 游标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-27-触发器"><span class="toc-text">3.27. 触发器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-28-事务管理"><span class="toc-text">3.28. 事务管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-29-字符集"><span class="toc-text">3.29. 字符集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-30-权限管理"><span class="toc-text">3.30. 权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-30-1-创建账户"><span class="toc-text">3.30.1. 创建账户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-30-2-修改账户名"><span class="toc-text">3.30.2. 修改账户名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-30-3-删除账户"><span class="toc-text">3.30.3. 删除账户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-30-4-查看权限"><span class="toc-text">3.30.4. 查看权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-30-5-授予权限"><span class="toc-text">3.30.5. 授予权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-30-6-删除权限"><span class="toc-text">3.30.6. 删除权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-30-7-更改密码"><span class="toc-text">3.30.7. 更改密码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-牛客"><span class="toc-text">4. 牛客</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-6 i,
        .toc-level-6 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"true"];
    </script>

  
  
  
  
      
  
  
  

    <div class="scroll" id="post-nav-button">
        
            <a href="/windows下用Flask开发微信公众号/" title="上一篇: Windows环境下用Flask开发微信公众号">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/Python知识结构/" title="下一篇: Python知识结构">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/Words/">Words</a></li><li class="post-list-item"><a class="post-list-link" href="/顶级目录/">顶级目录</a></li><li class="post-list-item"><a class="post-list-link" href="/编号之美/">编号之美</a></li><li class="post-list-item"><a class="post-list-link" href="/计算机网络/">计算机网络</a></li><li class="post-list-item"><a class="post-list-link" href="/知识整理术语表/">知识整理术语表</a></li><li class="post-list-item"><a class="post-list-link" href="/计算机知识框架/">计算机知识框架</a></li><li class="post-list-item"><a class="post-list-link" href="/计算机学习路线/">计算机学习路线</a></li><li class="post-list-item"><a class="post-list-link" href="/计算机组成原理/">计算机组成原理</a></li><li class="post-list-item"><a class="post-list-link" href="/算法实例/">算法实例</a></li><li class="post-list-item"><a class="post-list-link" href="/输入输出系统/">计算机组成原理_输入输出系统</a></li><li class="post-list-item"><a class="post-list-link" href="/代码大全/">代码大全</a></li><li class="post-list-item"><a class="post-list-link" href="/命名规范/">命名规范</a></li><li class="post-list-item"><a class="post-list-link" href="/self-dividing-numbers/">self-dividing-numbers</a></li><li class="post-list-item"><a class="post-list-link" href="/peak-index-in-a-mountain-array/">peak-index-in-a-mountain-array</a></li><li class="post-list-item"><a class="post-list-link" href="/search-in-a-binary-search-tree/">search-in-a-binary-search-tree</a></li><li class="post-list-item"><a class="post-list-link" href="/sort-array-by-parity-ii/">sort-array-by-parity-ii</a></li><li class="post-list-item"><a class="post-list-link" href="/swap-salary/">swap-salary</a></li><li class="post-list-item"><a class="post-list-link" href="/univalued-binary-tree/">univalued-binary-tree</a></li><li class="post-list-item"><a class="post-list-link" href="/array-partition-i/">array-partition-i</a></li><li class="post-list-item"><a class="post-list-link" href="/twoSum/">twoSum</a></li><li class="post-list-item"><a class="post-list-link" href="/fibonacci-number/">fibonacci-number</a></li><li class="post-list-item"><a class="post-list-link" href="/di-string-match/">di-string-match</a></li><li class="post-list-item"><a class="post-list-link" href="/k-closest-points-to-origin/">k-closest-points-to-origin</a></li><li class="post-list-item"><a class="post-list-link" href="/hamming-distance/">hamming-distance</a></li><li class="post-list-item"><a class="post-list-link" href="/merge-two-binary-trees/">merge-two-binary-trees</a></li><li class="post-list-item"><a class="post-list-link" href="/n-ary-tree-postorder-traversal/">n-ary-tree-postorder-traversal</a></li><li class="post-list-item"><a class="post-list-link" href="/number-of-recent-calls/">number-of-recent-calls</a></li><li class="post-list-item"><a class="post-list-link" href="/n-ary-tree-preorder-traversal/">n-ary-tree-preorder-traversal</a></li><li class="post-list-item"><a class="post-list-link" href="/数据结构与算法/">数据结构与算法</a></li><li class="post-list-item"><a class="post-list-link" href="/Flask语法释义/">Flask语法释义</a></li><li class="post-list-item"><a class="post-list-link" href="/Hexo/">Hexo</a></li><li class="post-list-item"><a class="post-list-link" href="/windows下用Flask开发微信公众号/">Windows环境下用Flask开发微信公众号</a></li><li class="post-list-item"><a class="post-list-link" href="/SQL/">SQL</a></li><li class="post-list-item"><a class="post-list-link" href="/Python知识结构/">Python知识结构</a></li><li class="post-list-item"><a class="post-list-link" href="/文件/">文件操作</a></li><li class="post-list-item"><a class="post-list-link" href="/NLTK/">NLTK</a></li><li class="post-list-item"><a class="post-list-link" href="/爬虫知识结构/">爬虫知识结构</a></li><li class="post-list-item"><a class="post-list-link" href="/Jupyter/">Jupyter</a></li><li class="post-list-item"><a class="post-list-link" href="/git/">git</a></li><li class="post-list-item"><a class="post-list-link" href="/GitHub/">GitHub</a></li><li class="post-list-item"><a class="post-list-link" href="/Docker/">Docker</a></li><li class="post-list-item"><a class="post-list-link" href="/20200502/">20200502</a></li></ul>


  
  
      <script>
          
      </script>
  </div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                2018-2020 <i class="fa fa-heart"></i> CJ
            </div>
            <div class="footer-right">
                Thanks for <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a> <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题 v3.5">Yelee</a><span> and Moxfive <i class="fa fa-copyright"></i> 
            </span></div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style="display:none">
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style="display:none">
                        <span id="page-visit" title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
    <script src="/js/GithubRepoWidget.js"></script>

<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 4;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
    <a href="/archives/" title="优先级别"><i class="fa fa-list"></i></a>
    <a href="/" title="返回首页"><i class="fa fa-bank"></i></a>
    <a href="/tags/" title="看标签云"><i class="fa fa-ils"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
             github: ".github-widget a", 
            
             post: ".article-entry a[href]", 
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>